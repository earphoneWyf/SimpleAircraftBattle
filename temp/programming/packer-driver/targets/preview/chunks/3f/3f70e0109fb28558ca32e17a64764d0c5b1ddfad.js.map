{"version":3,"sources":["file:///Users/wangyifeng1/Desktop/simpleaircraftbattle/assets/script/GameController.ts"],"names":["_decorator","Component","Node","ccclass","property","GameState","GameController","type","start","setCurState","GS_START","console","log","gameArea","update","deltaTime","onStartButtonClicked","GS_PLAYING","onRestartButtonClicked","onContinueButtonClicked","onPauseButtonClicked","GS_PAUSE","value","init","playing","pause","GS_OVER","over","active","gameStart","gamePause","gameOver","reset","setTimeout","hero","getChildByName","setPosition","enemy","removeAllChildren"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Node } from 'cc';\nconst { ccclass, property } = _decorator;\n\n//游戏状态\nexport enum GameState {\n    GS_START,\n    GS_PAUSE,\n    GS_PLAYING,\n    GS_OVER\n}\n\n@ccclass('GameController')\nexport class GameController extends Component {\n\n    @property({ type: Node })\n    gameStart: Node | null = null;\n\n    @property({ type: Node })\n    gamePause: Node | null = null;\n\n    @property({ type: Node })\n    gameOver: Node | null = null;\n\n    @property({ type: Node })\n    gameArea: Node | null = null;\n\n    start() {\n        this.setCurState(GameState.GS_START);\n        console.log('gameArea:', this.gameArea)\n    }\n\n    update(deltaTime: number) {\n\n    }\n\n    //开始\n    onStartButtonClicked() {\n        this.setCurState(GameState.GS_PLAYING);\n    }\n\n    //重新游戏\n    onRestartButtonClicked() {\n        this.setCurState(GameState.GS_START);\n    }\n\n    //继续游戏\n    onContinueButtonClicked() {\n        this.setCurState(GameState.GS_PLAYING);\n    }\n\n    //暂停游戏\n    onPauseButtonClicked() {\n        this.setCurState(GameState.GS_PAUSE);\n    }\n\n    //控制当前游戏状态\n    setCurState(value: GameState) {\n        switch (value) {\n            case GameState.GS_START:\n                this.init();\n                break;\n            case GameState.GS_PLAYING:\n                this.playing();\n                break;\n            case GameState.GS_PAUSE:\n                this.pause();\n                break;\n            case GameState.GS_OVER:\n                this.over();\n                break;\n        }\n    }\n\n    init() {\n\n        if (this.gameArea) {\n            this.gameArea.active = false;\n        }\n\n        if (this.gameStart) {\n            this.gameStart.active = true;\n        }\n\n        if (this.gamePause) {\n            this.gamePause.active = false;\n        }\n\n        if (this.gameOver) {\n            this.gameOver.active = false;\n        }\n\n        this.reset();\n    }\n\n    pause() {\n\n        if (this.gameArea) {\n            this.gameArea.active = false;\n        }\n\n        if (this.gameStart) {\n            this.gameStart.active = false;\n        }\n\n        if (this.gamePause) {\n            this.gamePause.active = true;\n        }\n\n        if (this.gameOver) {\n            this.gameOver.active = false;\n        }\n\n    }\n\n    over() {\n        setTimeout(() => {\n            if (this.gameArea) {\n                this.gameArea.active = false;\n                this.reset();\n            }\n        }, 100)\n\n        if (this.gameStart) {\n            this.gameStart.active = false;\n        }\n\n        if (this.gamePause) {\n            this.gamePause.active = false;\n        }\n\n        if (this.gameOver) {\n            this.gameOver.active = true;\n        }\n    }\n\n    playing() {\n        if (this.gameArea) {\n            this.gameArea.active = true;\n        }\n\n        if (this.gameArea) {\n            this.gameArea.active = true;\n        }\n\n        if (this.gameStart) {\n            this.gameStart.active = false;\n        }\n\n        if (this.gamePause) {\n            this.gamePause.active = false;\n        }\n\n        if (this.gameOver) {\n            this.gameOver.active = false;\n        }\n    }\n\n    //重置\n    reset() {\n        const hero = this.gameArea.getChildByName('hero');\n        hero.setPosition(-5, -316);\n\n        const enemy = this.gameArea.getChildByName('enemy');\n        enemy.removeAllChildren();\n    }\n}\n\n"]}